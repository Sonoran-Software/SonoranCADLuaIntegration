"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CADServerManager = void 0;
const CADServer_1 = require("../structures/CADServer");
const CacheManager_1 = require("./CacheManager");
class CADServerManager extends CacheManager_1.CacheManager {
    constructor(instance, manager) {
        super(instance, CADServer_1.CADServer, []);
        (async () => {
            var _a;
            try {
                const serversRes = await ((_a = manager.rest) === null || _a === void 0 ? void 0 : _a.request('GET_SERVERS'));
                const servers = JSON.parse(serversRes).servers;
                servers.forEach((server) => {
                    const serverStruct = {
                        id: server.id,
                        config: server
                    };
                    this._add(serverStruct, true, server.id);
                });
            }
            catch (err) {
                throw new Error(String(err));
            }
        })();
    }
}
exports.CADServerManager = CADServerManager;
